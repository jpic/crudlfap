<div class="navbar-fixed">
  <nav>
    <div class="nav-wrapper">
      <span href="#" data-action="click->sidenav#click" data-controller="sidenav" data-target="slide-out" class="sidenav-trigger"><i class="waves-effect material-icons">menu</i></span>
      {% if settings.SITE_NAME %}
      <a class="brand-logo" href="/" class="waves-effect brand-logo">{{ settings.SITE_NAME }}</a>
      {% endif %}
      <ul class="right">
        {% if not request.user.is_authenticated %}
          <li>
            <a
                href="{{ url('login') }}"
                data-ajax="_modal"
                >{{ _('Login') }}</a>
          </li>
        {% else %}
          <li>
            <a class="waves-effect dropdown-item" href="{{ url('logout') }}">{{ _('Logout') }}</a>
          </li>
          {% if request.session.become_user %}
          <li>
            <a href="/su">{{ _('Back to your account') }}</a>
          </li>
          {% endif %}
        {% endif %}
        {% if request.user.is_superuser %}
        <li>
          <a class="waves-effect dropdown-item" href="{{ url('crudlfap_urls') }}">URLs</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </nav>
</div>

<ul id="slide-out" class="sidenav">
  <li class="{% if request.path == '/' %}active{% endif %}"><a href="/">Home</a></li>
  {% for app, routers in Router.registry.get_app_menus('main', request).items() %}
    {% for router in routers %}
      {% for v in router.get_menu('main', request) %}
      <li class="{% if v == view %}active{% endif %}">
          <a
            class="waves-effect"
            href="{{ v.reverse() }}"
            title="{% if v.title %}{{ v.title }}{% endif %}"
          >{% if view.material_icon %}<i class="material-icons">{{ view.material_icon }}</i>{% endif %}{{ v.model._meta.verbose_name_plural.capitalize() }} {{ _(v.slug|capfirst) }}</a>
      </li>
      {% endfor %}
    {% endfor %}
  {% endfor %}
</ul>
